<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bromcom-Style MIS</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">
  <div id="root"></div>

  <!-- React / ReactDOM (UMD) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <!-- Babel Standalone -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useState, useEffect } = React;
    const e = React.createElement;

    function LoginPage({ onLogin }) {
      const [u, setU] = useState("");
      const [p, setP] = useState("");
      return e('div', { className: "flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-600 to-blue-800" },
        e('div', { className: "bg-white p-8 rounded shadow-lg w-96" },
          e('h1', { className: "text-3xl font-bold mb-6 text-center text-blue-700" }, "AegisSchool MIS"),
          e('input', { className: "w-full border p-2 mb-2", placeholder: "Username", value: u, onChange: e=>setU(e.target.value) }),
          e('input', { className: "w-full border p-2 mb-4", placeholder: "Password", type: "password", value: p, onChange: e=>setP(e.target.value) }),
          e('button', { className: "w-full bg-blue-600 text-white p-2 rounded font-semibold", onClick: ()=>onLogin(u,p) }, "Login"),
          e('div', { className: "mt-4 text-sm text-gray-600 text-center" }, "Demo: admin / admin")
        )
      );
    }

    function Dashboard() {
      const [page, setPage] = useState("dashboard");
      const [students, setStudents] = useState([]);
      const [name, setName] = useState("");
      
      return e('div', { className: "flex" },
        e('div', { className: "w-64 bg-blue-700 text-white h-screen p-4" },
          e('div', { className: "text-2xl font-bold mb-4" }, "AegisSchool"),
          ["dashboard","students","attendance","behaviour"].map(pn =>
            e('button', { key: pn, className: `w-full text-left p-2 rounded mb-1 ${page===pn?"bg-blue-900":""}`, onClick: ()=>setPage(pn) },
              pn.charAt(0).toUpperCase()+pn.slice(1)
            )
          )
        ),
        e('div', { className: "flex-1 p-6 bg-gray-100" },
          e('h1', { className: "text-3xl font-bold mb-4" }, page.charAt(0).toUpperCase()+page.slice(1)),
          page === "dashboard" && e('div', { className: "grid grid-cols-3 gap-4" },
            e('div', { className: "bg-white p-4 rounded shadow" }, "Students: ", e('strong', null, students.length))
          ),
          page === "students" && e('div', { className: "bg-white p-4 rounded shadow" },
            e('div', { className: "flex gap-2 mb-4" },
              e('input', { className: "border p-2 flex-1", placeholder: "Student name", value: name, onChange: e=>setName(e.target.value) }),
              e('button', { className: "bg-blue-600 text-white p-2 rounded", onClick: ()=>{setStudents([...students,{id:Date.now(),name}]);setName("");} }, "Add")
            ),
            e('ul', null,
              students.map(s=>e('li', { key: s.id, className: "p-2 border-t" }, s.name))
            )
          ),
          page !== "dashboard" && page !== "students" && e('div', { className: "bg-white p-4 rounded shadow text-gray-500" },
            page + " page coming soon..."
          )
        )
      );
    }

    function App() {
      const [logged, setLogged] = useState(false);
      const handleLogin = (u, p) => {
        if ((u === "admin" && p === "admin") || (u && p)) {
          setLogged(true);
        } else {
          alert("Invalid credentials");
        }
      };
      return logged ? e(Dashboard) : e(LoginPage, { onLogin: handleLogin });
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(e(App));
  </script>
</body>
</html>
